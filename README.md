# CPE Monitor Activity Transcript Parser

Parse NABP CPE Monitor Activity Transcript PDFs into structured JSON and view them in a table.

---

## What You Need (Prerequisites)

- **PHP 8.0 or newer**  
  - Check: `php -v`
  - Install: [php.net](https://www.php.net/downloads) or your OS package manager (e.g. `brew install php` on macOS).

- **Composer** (PHP dependency manager)  
  - Check: `composer --version`
  - Install: [getcomposer.org](https://getcomposer.org/download/)

---

## What to Download / Setup

1. **Get the project**  
   Copy or clone this folder (it should contain `pdf.php`, `viewer.html`, `composer.json`, etc.).

2. **Install PHP dependencies**  
   In the project folder, run:
   ```bash
   composer install
   ```
   This creates the `vendor/` folder and installs `smalot/pdfparser` (used to read PDFs).  
   If you don’t have Composer globally, you can use the local one:
   ```bash
   php composer.phar install
   ```
   (If `composer.phar` isn’t there, download it from [getcomposer.org](https://getcomposer.org/download/) and run the command above.)

3. **Your CPE transcript PDF**  
   Place your NABP CPE Monitor Activity Transcript PDF in the project folder (e.g. `transcript.pdf`) or remember its path.

---

## How to Run the Parser

From the project folder:

```bash
php pdf.php transcript.pdf
```

- Replace `transcript.pdf` with your PDF path if different.
- The script will:
  - Print the extracted JSON to the terminal.
  - Save the same JSON to a file with the same base name and `.json` (e.g. `transcript.pdf` → `transcript.json`).
  - Show: `Saved to transcript.json` (or your filename).

Example:

```bash
php pdf.php /path/to/my_cpe_transcript.pdf
# → Creates /path/to/my_cpe_transcript.json
```

---

## How to View the Result (Table)

1. **Ensure `transcript.json` exists**  
   Run the parser first (see above) so that `transcript.json` (or your `.json` file) is in the same folder as `viewer.html`.

2. **Open the viewer**
   - **Option A – Local server (recommended)**  
     From the project folder:
     ```bash
     php -S localhost:8000
     ```
     Then open: **http://localhost:8000/viewer.html**
   - **Option B – Direct file**  
     Open `viewer.html` in your browser (double‑click or File → Open).  
     If the page doesn’t load the JSON automatically, use “Choose JSON file” and select `transcript.json`.

3. **What you’ll see**
   - Header: Participant name, NABP e-Profile ID, CPE date range, total hours, report generated.
   - Table: All activities with columns: Activity Date, Activity #, Credit Type, Source, Title, Topic, Provider, Live Hours, Home Hours.
   - Disclaimer at the bottom (if present in the JSON).

You can also drag and drop `transcript.json` onto the viewer page.

---

## Project Files (Overview)

| File / Folder      | Purpose |
|--------------------|--------|
| `pdf.php`          | Parses CPE transcript PDF → JSON (CLI or HTTP). |
| `viewer.html`      | Displays `transcript.json` in a table in the browser. |
| `transcript.json`  | Generated by `pdf.php`; used by `viewer.html`. |
| `composer.json`    | Declares PHP dependencies (e.g. smalot/pdfparser). |
| `vendor/`          | Installed by `composer install`; do not edit. |

---

## Optional: Use the Parser via HTTP

You can call the parser from a web server:

- **POST** the PDF as multipart form field `pdf`, or  
- **POST** raw PDF bytes with `Content-Type: application/pdf`.

Response is JSON (same structure as the saved `.json` file).

---

## Troubleshooting

- **“require_once vendor/autoload.php … No such file”**  
  Run `composer install` in the project folder.

- **“command not found: composer”**  
  Install Composer from [getcomposer.org](https://getcomposer.org/download/) or use `php composer.phar` if you have `composer.phar` in the project.

- **Viewer shows “No file loaded”**  
  Open the site via a local server (e.g. `php -S localhost:8000` and open `viewer.html`), or use “Choose JSON file” and select your `.json` file.

- **Parser says “File not found”**  
  Use the full path to your PDF, e.g. `php pdf.php /Users/you/Downloads/transcript.pdf`.
